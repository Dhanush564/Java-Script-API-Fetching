<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Meal Explorer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<nav class="navbar navbar-dark bg-success">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">Meal Explorer</span>
    </div>
</nav>
<div class="container mt-4">
    <div class="card shadow">
        <div class="card-body">
            <h4 class="card-title mb-3">Search Meal</h4>
            <div class="input-group mb-3">
                <input type="text" id="mealInput" class="form-control"
                       placeholder="Enter value">
                <select id="mealType" class="form-select">
                    <option value="name">By Name</option>
                    <option value="ingredient">By Ingredient</option>
                    <option value="category">By Category</option>
                    <option value="area">By Area</option>
                </select>
                <button class="btn btn-success" onclick="searchMeal()">Search</button>
            </div>
            <div id="result"></div>
        </div>
    </div>
</div>
<script>
function searchMeal() {
    let value = document.getElementById("mealInput").value.trim();
    let type = document.getElementById("mealType").value;
    if (value === "") {
        document.getElementById("result").innerHTML =
            "<p class='text-danger'>Please enter a value</p>";
        return;
    }
    let url = "";
    if (type === "name") {
        url = `https://www.themealdb.com/api/json/v1/1/search.php?s=${value}`;
    }
    else if (type === "ingredient") {
        url = `https://www.themealdb.com/api/json/v1/1/filter.php?i=${value}`;
    }
    else if (type === "category") {
        url = `https://www.themealdb.com/api/json/v1/1/filter.php?c=${value}`;
    }
    else if (type === "area") {
        url = `https://www.themealdb.com/api/json/v1/1/filter.php?a=${value}`;
    }
    fetch(url)
        .then(res => res.json())
        .then(data => {
            let meals = data.meals;
            if (meals === null) {
                document.getElementById("result").innerHTML =
                    "<p class='text-danger'>No meals found</p>";
                return;
            }
            let output = "<h5 class='mt-3'>Meal Details</h5><div class='row'>";
            meals.forEach(meal => {
                output += `
                <div class="col-md-4 col-sm-6 mb-3">
                    <div class="card h-100 text-center">
                        <img src="${meal.strMealThumb}"
                             class="card-img-top w-50 mx-auto mt-2">
                        <div class="card-body">
                            <h6>${meal.strMeal}</h6>
                            <p class="card-text ">Meal ID: ${meal.idMeal}</p>
                            <p class="card-text">Area: ${meal.strArea}</p>
                            <p class="card-text">Ingredients: ${meal.strIngredient1 ? meal.strIngredient1 : ''} ${meal.strIngredient2 ? ', ' + meal.strIngredient2 : ''} ${meal.strIngredient3 ? ', ' + meal.strIngredient3 : ''} ${meal.strIngredient4 ? ', ' + meal.strIngredient4 : ''} ${meal.strIngredient5 ? ', ' + meal.strIngredient5 : ''}</p>
                        </div>
                    </div>
                </div>`;
            });
            output += "</div>";
            document.getElementById("result").innerHTML = output;
        })
        .catch(() => {
            document.getElementById("result").innerHTML =
                "<p class='text-danger'>Error loading data</p>";
        });
}
</script>
</body>
</html>
